
import kanji_data

# æ–‡éƒ¨ç§‘å­¦çœ å­¦ç¿’æŒ‡å°è¦é ˜ å­¦å¹´åˆ¥æ¼¢å­—é…å½“è¡¨ (1,026å­—)
# å‡ºå…¸: https://www.mext.go.jp/a_menu/shotou/new-cs/youryou/syou/koku/001.htm

GRADE_1 = set("ä¸€å³é›¨å††ç‹éŸ³ä¸‹ç«èŠ±è²å­¦æ°—ä¹ä¼‘ç‰é‡‘ç©ºæœˆçŠ¬è¦‹äº”å£æ ¡å·¦ä¸‰å±±å­å››ç³¸å­—è€³ä¸ƒè»Šæ‰‹åå‡ºå¥³å°ä¸Šæ£®äººæ°´æ­£ç”Ÿé’å¤•çŸ³èµ¤åƒå·å…ˆæ—©è‰è¶³æ‘å¤§ç”·ç«¹ä¸­è™«ç”ºå¤©ç”°åœŸäºŒæ—¥å…¥å¹´ç™½å…«ç™¾æ–‡æœ¨æœ¬åç›®ç«‹åŠ›æ—å…­")
GRADE_2 = set("å¼•ç¾½é›²åœ’é ä½•ç§‘å¤å®¶æ­Œç”»å›ä¼šæµ·çµµå¤–è§’æ¥½æ´»é–“ä¸¸å²©é¡”æ±½è¨˜å¸°å¼“ç‰›é­šäº¬å¼·æ•™è¿‘å…„å½¢è¨ˆå…ƒè¨€åŸæˆ¸å¤åˆå¾Œèªå·¥å…¬åºƒäº¤å…‰è€ƒè¡Œé«˜é»„åˆè°·å›½é»’ä»Šæ‰ç´°ä½œç®—æ­¢å¸‚çŸ¢å§‰æ€ç´™å¯ºè‡ªæ™‚å®¤ç¤¾å¼±é¦–ç§‹é€±æ˜¥æ›¸å°‘å ´è‰²é£Ÿå¿ƒæ–°è¦ªå›³æ•°è¥¿å£°æ˜Ÿæ™´åˆ‡é›ªèˆ¹ç·šå‰çµ„èµ°å¤šå¤ªä½“å°åœ°æ± çŸ¥èŒ¶æ˜¼é•·é³¥æœç›´é€šå¼Ÿåº—ç‚¹é›»åˆ€å†¬å½“æ±ç­”é ­åŒé“èª­å†…å—è‚‰é¦¬å£²è²·éº¦åŠç•ªçˆ¶é¢¨åˆ†èç±³æ­©æ¯æ–¹åŒ—æ¯å¦¹ä¸‡æ˜é³´æ¯›é–€å¤œé‡å‹ç”¨æ›œæ¥é‡Œç†è©±")
GRADE_3 = set("æ‚ªå®‰æš—åŒ»å§”æ„è‚²å“¡é™¢é£²é‹æ³³é§…å¤®æ¨ªå±‹æ¸©åŒ–è·ç•Œé–‹éšå¯’æ„Ÿæ¼¢é¤¨å²¸èµ·æœŸå®¢ç©¶æ€¥ç´šå®®çƒå»æ©‹æ¥­æ›²å±€éŠ€åŒºè‹¦å…·å›ä¿‚è»½è¡€æ±ºç ”çœŒåº«æ¹–å‘å¹¸æ¸¯å·æ ¹ç¥­çš¿ä»•æ­»ä½¿å§‹æŒ‡æ­¯è©©æ¬¡äº‹æŒå¼å®Ÿå†™è€…ä¸»å®ˆå–é…’å—å·æ‹¾çµ‚ç¿’é›†ä½é‡å®¿æ‰€æš‘åŠ©æ˜­æ¶ˆå•†ç« å‹ä¹—æ¤ç”³èº«ç¥çœŸæ·±é€²ä¸–æ•´æ˜”å…¨ç›¸é€æƒ³æ¯é€Ÿæ—ä»–æ‰“å¯¾å¾…ä»£ç¬¬é¡Œç‚­çŸ­è«‡ç€æ³¨æŸ±ä¸å¸³èª¿è¿½å®šåº­ç¬›é‰„è»¢éƒ½åº¦æŠ•è±†å³¶æ¹¯ç™»ç­‰å‹•ç«¥è¾²æ³¢é…å€ç®±ç•‘ç™ºåå‚æ¿çš®æ‚²ç¾é¼»ç­†æ°·è¡¨ç§’ç—…å“è² éƒ¨æœç¦ç‰©å¹³è¿”å‹‰æ”¾å‘³å‘½é¢å•å½¹è–¬ç”±æ²¹æœ‰éŠäºˆç¾Šæ´‹è‘‰é™½æ§˜è½æµæ—…ä¸¡ç·‘ç¤¼åˆ—ç·´è·¯å’Œ")
GRADE_4 = set("æ„›æ¡ˆä»¥è¡£ä½å›²èƒƒå°è‹±æ „å¡©å„„åŠ æœè²¨èª²èŠ½æ”¹æ¢°å®³å„è¦šè¡—å®Œå®˜ç®¡é–¢è¦³é¡˜å¸Œå­£ç´€å–œæ——å™¨æ©Ÿè­°æ±‚æ³£æ•‘çµ¦æŒ™æ¼å…±å”é¡ç«¶æ¥µè¨“è»éƒ¡å¾„å‹æ™¯èŠ¸æ¬ çµå»ºå¥é¨“å›ºåŠŸå¥½å€™èˆªåº·å‘Šå·®èœæœ€ææ˜¨æœ­åˆ·æ®ºå¯Ÿå‚ç”£æ•£æ®‹æ°å¸è©¦å…æ²»æ»‹è¾é¹¿å¤±å€Ÿç¨®å‘¨ç¥é †åˆæ¾ç¬‘å”±ç„¼è±¡ç…§è³è‡£ä¿¡æˆçœæ¸…é™å¸­ç©æŠ˜ç¯€èª¬æµ…æˆ¦é¸ç„¶äº‰å€‰å·£æŸå´ç¶šå’å­«å¸¯éšŠé”å˜ç½®ä»²è²¯å…†è…¸ä½åº•åœçš„å…¸ä¼å¾’åŠªç¯å ‚åƒç‰¹å¾—æ¯’ç†±å¿µæ•—æ¢…åšé£¯é£›è²»å¿…ç¥¨æ¨™ä¸å¤«ä»˜åºœå‰¯ç²‰å…µåˆ¥è¾ºå¤‰ä¾¿åŒ…æ³•æœ›ç‰§æœ«æº€æœªè„ˆæ°‘ç„¡ç´„å‹‡è¦é¤Šæµ´åˆ©é™¸è‰¯æ–™é‡è¼ªé¡ä»¤å†·ä¾‹æ­´é€£è€åŠ´éŒ²")
GRADE_5 = set("åœ§ç§»å› æ°¸å–¶è¡›æ˜“ç›Šæ¶²æ¼”å¿œå¾€æ¡œæ©å¯ä»®ä¾¡æ²³éå¿«è³€è§£æ ¼ç¢ºé¡åˆŠå¹¹æ…£çœ¼åŸºå¯„è¦æŠ€ç¾©é€†ä¹…æ—§å±…è¨±å¢ƒå‡ç¦å¥ç¾¤çµŒæ½”ä»¶åˆ¸é™ºæ¤œé™ç¾æ¸›æ•…å€‹è­·åŠ¹åšè€•é‰±æ§‹èˆˆè¬›æ··æŸ»å†ç½å¦»æ¡éš›åœ¨è²¡ç½ªé›‘é…¸è³›æ”¯å¿—æå¸«è³‡é£¼ç¤ºä¼¼è­˜è³ªèˆè¬æˆä¿®è¿°è¡“æº–åºæ‹›æ‰¿è¨¼æ¡çŠ¶å¸¸æƒ…ç¹”è·åˆ¶æ€§æ”¿å‹¢ç²¾è£½ç¨è²¬ç¸¾æ¥è¨­èˆŒçµ¶éŠ­ç¥–ç´ ç·é€ åƒå¢—å‰‡æ¸¬å±ç‡æé€€è²¸æ…‹å›£æ–­ç¯‰å¼µæç¨‹é©æ•µçµ±éŠ…å°å¾³ç‹¬ä»»ç‡ƒèƒ½ç ´çŠ¯åˆ¤ç‰ˆæ¯”è‚¥éå‚™ä¿µè©•è²§å©¦å¯Œå¸ƒæ­¦å¾©è¤‡ä»ç·¨å¼ä¿å¢“å ±è±Šé˜²è²¿æš´å‹™å¤¢è¿·ç¶¿è¼¸ä½™é å®¹ç•¥ç•™é ˜")
GRADE_6 = set("ç•°éºåŸŸå®‡æ˜ å»¶æ²¿æˆ‘ç°æ‹¡é©é–£å‰²æ ªå¹²å·»çœ‹ç°¡å±æœºæ®è²´ç–‘å¸ä¾›èƒ¸éƒ·å‹¤ç­‹ç³»æ•¬è­¦åŠ‡æ¿€ç©´çµ¹æ¨©æ†²æºå³å·±å‘¼èª¤åå­çš‡ç´…é™é‹¼åˆ»ç©€éª¨å›°ç ‚åº§æ¸ˆè£ç­–å†Šèš•è‡³ç§å§¿è¦–è©èªŒç£å°„æ¨å°ºè‹¥æ¨¹åå®—å°±è¡†å¾“ç¸¦ç¸®ç†Ÿç´”å‡¦ç½²è«¸é™¤å°†å‚·éšœåŸè’¸é‡ä»å‚æ¨å¯¸ç››è–èª å®£å°‚æ³‰æ´—æŸ“å–„å¥çª“å‰µè£…å±¤æ“è”µè‡“å­˜å°Šå®…æ‹…æ¢èª•æ®µæš–å€¤å®™å¿ è‘—åºé ‚æ½®è³ƒç—›å±•è¨å…šç³–å±Šé›£ä¹³èªç´è„³æ´¾æ‹èƒŒè‚ºä¿³ç­æ™©å¦æ‰¹ç§˜è…¹å¥®ä¸¦é™›é–‰ç‰‡è£œæš®å®è¨ªäº¡å¿˜æ£’æšå¹•å¯†ç›Ÿæ¨¡è¨³éƒµå„ªå¹¼æ¬²ç¿Œä¹±åµè¦§è£å¾‹è‡¨æœ—è«–")

EXPECTED_COUNTS = {
    'grade1': 80,
    'grade2': 160,
    'grade3': 200,
    'grade4': 202,
    'grade5': 193,
    'grade6': 191
}

# å­¦å¹´1ã€œ6ã®ã‚»ãƒƒãƒˆ
EXPECTED_SETS = {
    'grade1': GRADE_1,
    'grade2': GRADE_2,
    'grade3': GRADE_3,
    'grade4': GRADE_4,
    'grade5': GRADE_5,
    'grade6': GRADE_6
}

def verify_kanji_data():
    with open('verification_result.txt', 'w', encoding='utf-8') as f:
        f.write("=== æ¼¢å­—ãƒ‡ãƒ¼ã‚¿ã®ç¶²ç¾…æ€§æ¤œè¨¼ã‚’é–‹å§‹ã—ã¾ã™ ===\n")
        
        # kanji_data.pyã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        actual_data = kanji_data.GRADE_KANJI_DATA
        
        total_missing = 0
        total_extra = 0
        
        for grade_code, expected_set in EXPECTED_SETS.items():
            grade_name = kanji_data.GRADE_NAMES.get(grade_code, grade_code)
            
            # å®Ÿéš›ã«å«ã¾ã‚Œã¦ã„ã‚‹æ¼¢å­—ã®ãƒªã‚¹ãƒˆ
            actual_list = actual_data.get(grade_code, [])
            actual_set = set()
            
            # è¾æ›¸ã‹ã‚‰æ¼¢å­—æ–‡å­—ã ã‘æŠ½å‡º
            for item in actual_list:
                if isinstance(item, dict):
                    actual_set.add(item['kanji'])
                else:
                    actual_set.add(item)
                    
            # æ¤œè¨¼
            missing = expected_set - actual_set
            extra = actual_set - expected_set # å­¦å¹´ç§»å‹•ãªã©ã§ç¾åœ¨ã¯é•ã†å­¦å¹´ã«ãªã£ã¦ã„ã‚‹å ´åˆãªã©
            
            f.write(f"\n[{grade_name}]\n")
            f.write(f"  æœŸå¾…ã•ã‚Œã‚‹æ•°: {len(expected_set)}å­—\n")
            f.write(f"  å®Ÿéš›ã®æ•°:     {len(actual_set)}å­—\n")
            
            if len(missing) > 0:
                f.write(f"  âš ï¸ ä¸è¶³ã—ã¦ã„ã‚‹æ¼¢å­— ({len(missing)}å­—): {sorted(list(missing))}\n")
                total_missing += len(missing)
            else:
                f.write("  âœ… ä¸è¶³ãªã—\n")
                
            if len(extra) > 0:
                f.write(f"  â„¹ï¸ é…å½“å¤–ã®æ¼¢å­— ({len(extra)}å­—): {sorted(list(extra))}\n")
                total_extra += len(extra)
                
        f.write("\n=== æ¤œè¨¼çµæœã‚µãƒãƒª ===\n")
        if total_missing == 0:
            f.write("ğŸ‰ å…¨å­¦å¹´ã®æ¼¢å­—ãŒå®Œå…¨ã«ç¶²ç¾…ã•ã‚Œã¦ã„ã¾ã™ï¼ä¸€æ–‡å­—ã‚‚æ¬ ã‘ã¦ã„ã¾ã›ã‚“ã€‚\n")
        else:
            f.write(f"âš ï¸ åˆè¨ˆ {total_missing} æ–‡å­—ã®æ¼¢å­—ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\n")

if __name__ == "__main__":
    verify_kanji_data()
