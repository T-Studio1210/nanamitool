{% extends "base.html" %}

{% block title %}AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼ - ä¸ƒå¤¢å­¦ç¿’ã‚¢ãƒ—ãƒª{% endblock %}

{% block head %}
<style>
    .ai-input {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
    }

    .ai-input input {
        flex: 1;
    }

    .ai-response {
        background: white;
        border: 2px solid var(--primary);
        border-radius: 16px;
        padding: 20px;
        margin-top: 20px;
    }

    .ai-response h3 {
        color: var(--primary);
        margin-bottom: 12px;
    }

    .loading {
        text-align: center;
        padding: 40px;
        color: var(--text-muted);
    }

    .loading-spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid var(--border);
        border-top-color: var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">ğŸ¤– AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼</h1>
    <a href="{{ url_for('japanese_dashboard') }}" class="btn btn-secondary btn-sm">â† æˆ»ã‚‹</a>
</div>

<div class="card">
    <p>æ¼¢å­—ã‚„ç†Ÿèªã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒèª­ã¿æ–¹ãƒ»æ„å‘³ãƒ»ä¾‹æ–‡ã‚’æ•™ãˆã¦ãã‚Œã‚‹ã‚ˆï¼</p>

    <form method="POST" id="ai-form">
        <div class="ai-input">
            <input type="text" name="query" class="form-input" placeholder="ä¾‹: å‹‰å¼·" value="{{ query or '' }}" required>
            <button type="submit" class="btn btn-primary">è³ªå•ã™ã‚‹</button>
        </div>
    </form>

    {% if loading %}
    <div class="loading">
        <div class="loading-spinner"></div>
        <p>AIãŒè€ƒãˆä¸­...</p>
    </div>
    {% endif %}

    {% if response %}
    <div class="ai-response">
        <h3>ğŸ¤– AIã®å›ç­”</h3>
        <div style="white-space: pre-wrap;">{{ response }}</div>
    </div>
    {% endif %}

    {% if error %}
    <div class="alert alert-error">
        {{ error }}
    </div>
    {% endif %}
</div>

<div class="card">
    <h3 class="card-title">ğŸ’¡ è³ªå•ã®ãƒ’ãƒ³ãƒˆ</h3>
    <ul style="margin-left: 20px; color: var(--text-secondary);">
        <li>ã€Œå‹‰å¼·ã€ã®èª­ã¿æ–¹ã¨æ„å‘³ã‚’æ•™ãˆã¦</li>
        <li>ã€Œå­¦æ ¡ã€ã‚’ä½¿ã£ãŸä¾‹æ–‡ã‚’ä½œã£ã¦</li>
        <li>ã€Œå‹é”ã€ã¨ã€Œå‹äººã€ã®é•ã„ã¯ï¼Ÿ</li>
    </ul>
</div>
{% endblock %}