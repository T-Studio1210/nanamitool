{% extends "base.html" %}

{% block title %}æ—¥æœ¬èªå­¦ç¿’ - ä¸ƒå¤¢å­¦ç¿’ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªå­¦ç¿’</h1>
</div>

<!-- å­¦ç¿’çµ±è¨ˆ -->
<div class="dashboard-grid" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 24px;">
    <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-value">{{ stats.total }}</div>
        <div class="stat-label">ç·å›ç­”æ•°</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.correct }}</div>
        <div class="stat-label">æ­£è§£æ•°</div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-value">{{ stats.accuracy }}%</div>
        <div class="stat-label">æ­£ç­”ç‡</div>
    </div>
</div>

<!-- å…ˆç”Ÿã‹ã‚‰ã®èª²é¡Œï¼ˆã‚°ãƒ«ãƒ¼ãƒ—åŒ–è¡¨ç¤ºï¼‰ -->
{% if japanese_tasks %}
<div class="card" style="border: 2px solid #e91e8c;">
    <h2 class="card-title" style="color: #e91e8c;">ğŸ“¬ å…ˆç”Ÿã‹ã‚‰ã®èª²é¡Œ</h2>
    <div class="problem-list">
        {% for task in japanese_tasks %}
        <a href="{% if task.type == 'quiz' or task.type == 'quiz_group' %}{{ url_for('student_quiz_assignment', assignment_id=task.assignment_id) }}{% elif task.type == 'flashcard' or task.type == 'flashcard_group' %}{{ url_for('student_flashcard', assignment_id=task.assignment_id) }}{% elif task.type == 'writing' or task.type == 'writing_group' %}{{ url_for('student_writing', assignment_id=task.assignment_id) }}{% else %}#{% endif %}"
            class="problem-card" style="padding: 12px; text-decoration: none; display: block;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong style="font-size: 1.2rem;">{{ task.title }}</strong>
                </div>
                <div style="display: flex; gap: 8px; align-items: center;">
                    {% if task.type == 'quiz' or task.type == 'quiz_group' %}
                    <span class="status-badge" style="background: #e1bee7; color: #4a148c;">ğŸ¯ ã‚¯ã‚¤ã‚º</span>
                    {% elif task.type == 'flashcard' or task.type == 'flashcard_group' %}
                    <span class="status-badge" style="background: #c5cae9; color: #1a237e;">ğŸ“– ã‚«ãƒ¼ãƒ‰</span>
                    {% elif task.type == 'writing' or task.type == 'writing_group' %}
                    <span class="status-badge" style="background: #b2dfdb; color: #004d40;">âœï¸ æ›¸ãå–ã‚Š</span>
                    {% endif %}

                    {% if task.completed %}
                    <span class="status-badge" style="background: #e8f5e9; color: #1b5e20;">âœ… å®Œäº†</span>
                    {% else %}
                    <span class="status-badge"
                        style="background: linear-gradient(135deg, #ff6b6b, #ff8e53); color: white; animation: pulse 1.5s infinite;">ğŸ†•
                        æœªå®Œäº†</span>
                    {% endif %}
                </div>
            </div>
            <div style="margin-top: 8px; color: var(--text-muted); font-size: 0.9rem;">
                {{ task.created_at|jst('%m/%d %H:%M') }} é…ä¿¡
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% else %}
<div class="card">
    <div class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <p>å…ˆç”Ÿã‹ã‚‰ã®èª²é¡Œã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</p>
    </div>
</div>
{% endif %}

<!-- è‡ªç¿’ãƒ¢ãƒ¼ãƒ‰ -->
<div class="card">
    <h2 class="card-title">ğŸ® è‡ªç¿’ãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã¼ã†</h2>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
        <a href="{{ url_for('japanese_quiz') }}" class="btn btn-primary"
            style="text-decoration: none; text-align: center;">
            ğŸ¯ ç†Ÿèªã‚¯ã‚¤ã‚º
        </a>
        <a href="{{ url_for('japanese_flashcard') }}" class="btn btn-secondary"
            style="text-decoration: none; text-align: center;">
            ğŸ“– ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰
        </a>
        <a href="{{ url_for('japanese_writing') }}" class="btn btn-secondary"
            style="text-decoration: none; text-align: center; background: linear-gradient(135deg, #9c27b0, #7b1fa2);">
            âœï¸ æ›¸ãå–ã‚Šç·´ç¿’
        </a>
        <a href="{{ url_for('japanese_ai_tutor') }}" class="btn btn-success"
            style="text-decoration: none; text-align: center;">
            ğŸ¤– AIãƒãƒ¥ãƒ¼ã‚¿ãƒ¼
        </a>
    </div>
</div>

<style>
    @keyframes pulse {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }
    }
</style>

{% endblock %}